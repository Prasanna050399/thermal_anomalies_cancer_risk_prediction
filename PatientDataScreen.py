from PyQt5 import QtCore, QtGui, QtWidgets
from PyQt5.QtCore import QDate
from PyQt5.QtGui import QColor
from PyQt5.QtWidgets import QMessageBox
from datetime import datetime, date
from dateutil.relativedelta import relativedelta
import cv2 as cv
from json import dumps
import HomeScreen
import ImageSelectionScreen
from Cache import Cache
from Database import Database
from Image import imageConversion, showOnWidget

class PatientDataScreen(object):
    def __init__(self, window, cache=None):
        window.__init__()
        self.cache = cache
        if cache is None:
            self.cache = Cache()
        self.setupUi(window)
        
    def setupUi(self, patientDataScreenWindow):
        patientDataScreenWindow.setObjectName("patientDataScreenWindow")
        patientDataScreenWindow.resize(1200, 600)
        font = QtGui.QFont()
        font.setFamily("Times New Roman")
        font.setPointSize(11)
        patientDataScreenWindow.setFont(font)
        self.centralwidget = QtWidgets.QWidget(patientDataScreenWindow)
        self.centralwidget.setObjectName("centralwidget")
        self.gridLayout = QtWidgets.QGridLayout(self.centralwidget)
        self.gridLayout.setObjectName("gridLayout")
        self.scrollArea = QtWidgets.QScrollArea(self.centralwidget)
        self.scrollArea.setWidgetResizable(True)
        self.scrollArea.setObjectName("scrollArea")
        self.scrollAreaWidgetContents = QtWidgets.QWidget()
        self.scrollAreaWidgetContents.setGeometry(QtCore.QRect(-45, -68, 1364, 1091))
        self.scrollAreaWidgetContents.setObjectName("scrollAreaWidgetContents")
        self.gridLayout_2 = QtWidgets.QGridLayout(self.scrollAreaWidgetContents)
        self.gridLayout_2.setObjectName("gridLayout_2")
        self.backButton = QtWidgets.QPushButton(self.scrollAreaWidgetContents)
        sizePolicy = QtWidgets.QSizePolicy(QtWidgets.QSizePolicy.Fixed, QtWidgets.QSizePolicy.Fixed)
        sizePolicy.setHorizontalStretch(0)
        sizePolicy.setVerticalStretch(0)
        sizePolicy.setHeightForWidth(self.backButton.sizePolicy().hasHeightForWidth())
        self.backButton.setSizePolicy(sizePolicy)
        self.backButton.setObjectName("backButton")
        self.gridLayout_2.addWidget(self.backButton, 0, 0, 1, 1)
        spacerItem = QtWidgets.QSpacerItem(20, 60, QtWidgets.QSizePolicy.Minimum, QtWidgets.QSizePolicy.Fixed)
        self.gridLayout_2.addItem(spacerItem, 0, 1, 1, 1)
        self.patientInfoSection = QtWidgets.QGroupBox(self.scrollAreaWidgetContents)
        sizePolicy = QtWidgets.QSizePolicy(QtWidgets.QSizePolicy.MinimumExpanding, QtWidgets.QSizePolicy.Preferred)
        sizePolicy.setHorizontalStretch(0)
        sizePolicy.setVerticalStretch(0)
        sizePolicy.setHeightForWidth(self.patientInfoSection.sizePolicy().hasHeightForWidth())
        self.patientInfoSection.setSizePolicy(sizePolicy)
        font = QtGui.QFont()
        font.setFamily("Times New Roman")
        font.setPointSize(11)
        font.setBold(False)
        font.setItalic(False)
        font.setUnderline(False)
        font.setWeight(50)
        font.setStrikeOut(False)
        self.patientInfoSection.setFont(font)
        self.patientInfoSection.setFlat(False)
        self.patientInfoSection.setCheckable(False)
        self.patientInfoSection.setObjectName("patientInfoSection")
        self.gridLayout_3 = QtWidgets.QGridLayout(self.patientInfoSection)
        self.gridLayout_3.setObjectName("gridLayout_3")
        self.breastProfileField = QtWidgets.QComboBox(self.patientInfoSection)
        sizePolicy = QtWidgets.QSizePolicy(QtWidgets.QSizePolicy.MinimumExpanding, QtWidgets.QSizePolicy.Fixed)
        sizePolicy.setHorizontalStretch(0)
        sizePolicy.setVerticalStretch(0)
        sizePolicy.setHeightForWidth(self.breastProfileField.sizePolicy().hasHeightForWidth())
        self.breastProfileField.setSizePolicy(sizePolicy)
        self.breastProfileField.setObjectName("breastProfileField")
        self.gridLayout_3.addWidget(self.breastProfileField, 7, 10, 1, 1)
        self.radiationHistoryLabel = QtWidgets.QLabel(self.patientInfoSection)
        sizePolicy = QtWidgets.QSizePolicy(QtWidgets.QSizePolicy.Fixed, QtWidgets.QSizePolicy.Fixed)
        sizePolicy.setHorizontalStretch(0)
        sizePolicy.setVerticalStretch(0)
        sizePolicy.setHeightForWidth(self.radiationHistoryLabel.sizePolicy().hasHeightForWidth())
        self.radiationHistoryLabel.setSizePolicy(sizePolicy)
        self.radiationHistoryLabel.setObjectName("radiationHistoryLabel")
        self.gridLayout_3.addWidget(self.radiationHistoryLabel, 10, 0, 1, 1)
        spacerItem1 = QtWidgets.QSpacerItem(20, 20, QtWidgets.QSizePolicy.Minimum, QtWidgets.QSizePolicy.Fixed)
        self.gridLayout_3.addItem(spacerItem1, 2, 0, 1, 1)
        self.breastFeedingHistoryField = QtWidgets.QComboBox(self.patientInfoSection)
        sizePolicy = QtWidgets.QSizePolicy(QtWidgets.QSizePolicy.MinimumExpanding, QtWidgets.QSizePolicy.Fixed)
        sizePolicy.setHorizontalStretch(0)
        sizePolicy.setVerticalStretch(0)
        sizePolicy.setHeightForWidth(self.breastFeedingHistoryField.sizePolicy().hasHeightForWidth())
        self.breastFeedingHistoryField.setSizePolicy(sizePolicy)
        self.breastFeedingHistoryField.setObjectName("breastFeedingHistoryField")
        self.gridLayout_3.addWidget(self.breastFeedingHistoryField, 5, 4, 1, 4)
        self.currentDatelabel = QtWidgets.QLabel(self.patientInfoSection)
        sizePolicy = QtWidgets.QSizePolicy(QtWidgets.QSizePolicy.Fixed, QtWidgets.QSizePolicy.Fixed)
        sizePolicy.setHorizontalStretch(0)
        sizePolicy.setVerticalStretch(0)
        sizePolicy.setHeightForWidth(self.currentDatelabel.sizePolicy().hasHeightForWidth())
        self.currentDatelabel.setSizePolicy(sizePolicy)
        self.currentDatelabel.setMinimumSize(QtCore.QSize(0, 0))
        font = QtGui.QFont()
        font.setFamily("Times New Roman")
        font.setPointSize(11)
        font.setBold(False)
        font.setItalic(False)
        font.setUnderline(False)
        font.setWeight(50)
        font.setStrikeOut(False)
        self.currentDatelabel.setFont(font)
        self.currentDatelabel.setObjectName("currentDatelabel")
        self.gridLayout_3.addWidget(self.currentDatelabel, 1, 9, 1, 1, QtCore.Qt.AlignHCenter)
        self.medicineConsumptionHistoryField = QtWidgets.QComboBox(self.patientInfoSection)
        sizePolicy = QtWidgets.QSizePolicy(QtWidgets.QSizePolicy.MinimumExpanding, QtWidgets.QSizePolicy.Fixed)
        sizePolicy.setHorizontalStretch(0)
        sizePolicy.setVerticalStretch(0)
        sizePolicy.setHeightForWidth(self.medicineConsumptionHistoryField.sizePolicy().hasHeightForWidth())
        self.medicineConsumptionHistoryField.setSizePolicy(sizePolicy)
        self.medicineConsumptionHistoryField.setObjectName("medicineConsumptionHistoryField")
        self.gridLayout_3.addWidget(self.medicineConsumptionHistoryField, 10, 4, 1, 4)
        spacerItem2 = QtWidgets.QSpacerItem(40, 20, QtWidgets.QSizePolicy.Fixed, QtWidgets.QSizePolicy.Minimum)
        self.gridLayout_3.addItem(spacerItem2, 3, 2, 1, 1)
        self.patientIdField = QtWidgets.QLineEdit(self.patientInfoSection)
        self.patientIdField.setEnabled(False)
        sizePolicy = QtWidgets.QSizePolicy(QtWidgets.QSizePolicy.MinimumExpanding, QtWidgets.QSizePolicy.Fixed)
        sizePolicy.setHorizontalStretch(0)
        sizePolicy.setVerticalStretch(0)
        sizePolicy.setHeightForWidth(self.patientIdField.sizePolicy().hasHeightForWidth())
        self.patientIdField.setSizePolicy(sizePolicy)
        font = QtGui.QFont()
        font.setFamily("Times New Roman")
        font.setPointSize(11)
        font.setBold(False)
        font.setItalic(False)
        font.setUnderline(False)
        font.setWeight(50)
        font.setStrikeOut(False)
        self.patientIdField.setFont(font)
        self.patientIdField.setFocusPolicy(QtCore.Qt.NoFocus)
        self.patientIdField.setObjectName("patientIdField")
        self.gridLayout_3.addWidget(self.patientIdField, 1, 1, 1, 1)
        spacerItem3 = QtWidgets.QSpacerItem(40, 20, QtWidgets.QSizePolicy.Fixed, QtWidgets.QSizePolicy.Minimum)
        self.gridLayout_3.addItem(spacerItem3, 5, 2, 1, 1)
        spacerItem4 = QtWidgets.QSpacerItem(20, 20, QtWidgets.QSizePolicy.Minimum, QtWidgets.QSizePolicy.Fixed)
        self.gridLayout_3.addItem(spacerItem4, 0, 0, 1, 1)
        spacerItem5 = QtWidgets.QSpacerItem(40, 20, QtWidgets.QSizePolicy.Fixed, QtWidgets.QSizePolicy.Minimum)
        self.gridLayout_3.addItem(spacerItem5, 3, 8, 1, 1)
        self.selfHistoryOfBCField = QtWidgets.QComboBox(self.patientInfoSection)
        sizePolicy = QtWidgets.QSizePolicy(QtWidgets.QSizePolicy.MinimumExpanding, QtWidgets.QSizePolicy.Fixed)
        sizePolicy.setHorizontalStretch(0)
        sizePolicy.setVerticalStretch(0)
        sizePolicy.setHeightForWidth(self.selfHistoryOfBCField.sizePolicy().hasHeightForWidth())
        self.selfHistoryOfBCField.setSizePolicy(sizePolicy)
        self.selfHistoryOfBCField.setObjectName("selfHistoryOfBCField")
        self.gridLayout_3.addWidget(self.selfHistoryOfBCField, 7, 4, 1, 4)
        self.maritalStatusLabel = QtWidgets.QLabel(self.patientInfoSection)
        sizePolicy = QtWidgets.QSizePolicy(QtWidgets.QSizePolicy.Fixed, QtWidgets.QSizePolicy.Fixed)
        sizePolicy.setHorizontalStretch(0)
        sizePolicy.setVerticalStretch(0)
        sizePolicy.setHeightForWidth(self.maritalStatusLabel.sizePolicy().hasHeightForWidth())
        self.maritalStatusLabel.setSizePolicy(sizePolicy)
        self.maritalStatusLabel.setObjectName("maritalStatusLabel")
        self.gridLayout_3.addWidget(self.maritalStatusLabel, 5, 0, 1, 1, QtCore.Qt.AlignHCenter)
        self.ageDuringFirstPregnancyField = QtWidgets.QComboBox(self.patientInfoSection)
        sizePolicy = QtWidgets.QSizePolicy(QtWidgets.QSizePolicy.MinimumExpanding, QtWidgets.QSizePolicy.Fixed)
        sizePolicy.setHorizontalStretch(0)
        sizePolicy.setVerticalStretch(0)
        sizePolicy.setHeightForWidth(self.ageDuringFirstPregnancyField.sizePolicy().hasHeightForWidth())
        self.ageDuringFirstPregnancyField.setSizePolicy(sizePolicy)
        self.ageDuringFirstPregnancyField.setObjectName("ageDuringFirstPregnancyField")
        self.gridLayout_3.addWidget(self.ageDuringFirstPregnancyField, 5, 10, 1, 1)
        spacerItem6 = QtWidgets.QSpacerItem(40, 20, QtWidgets.QSizePolicy.Fixed, QtWidgets.QSizePolicy.Minimum)
        self.gridLayout_3.addItem(spacerItem6, 1, 2, 1, 1)
        spacerItem7 = QtWidgets.QSpacerItem(20, 20, QtWidgets.QSizePolicy.Minimum, QtWidgets.QSizePolicy.Expanding)
        self.gridLayout_3.addItem(spacerItem7, 8, 0, 1, 1)
        self.bcFamilyHistoryLabel = QtWidgets.QLabel(self.patientInfoSection)
        sizePolicy = QtWidgets.QSizePolicy(QtWidgets.QSizePolicy.Fixed, QtWidgets.QSizePolicy.Fixed)
        sizePolicy.setHorizontalStretch(0)
        sizePolicy.setVerticalStretch(0)
        sizePolicy.setHeightForWidth(self.bcFamilyHistoryLabel.sizePolicy().hasHeightForWidth())
        self.bcFamilyHistoryLabel.setSizePolicy(sizePolicy)
        self.bcFamilyHistoryLabel.setObjectName("bcFamilyHistoryLabel")
        self.gridLayout_3.addWidget(self.bcFamilyHistoryLabel, 7, 0, 1, 1, QtCore.Qt.AlignHCenter)
        self.patientDateOfBirthField = QtWidgets.QDateEdit(self.patientInfoSection)
        sizePolicy = QtWidgets.QSizePolicy(QtWidgets.QSizePolicy.MinimumExpanding, QtWidgets.QSizePolicy.Fixed)
        sizePolicy.setHorizontalStretch(0)
        sizePolicy.setVerticalStretch(0)
        sizePolicy.setHeightForWidth(self.patientDateOfBirthField.sizePolicy().hasHeightForWidth())
        self.patientDateOfBirthField.setSizePolicy(sizePolicy)
        font = QtGui.QFont()
        font.setFamily("Times New Roman")
        font.setPointSize(11)
        font.setBold(False)
        font.setItalic(False)
        font.setUnderline(False)
        font.setWeight(50)
        font.setStrikeOut(False)
        self.patientDateOfBirthField.setFont(font)
        self.patientDateOfBirthField.setCalendarPopup(True)
        self.patientDateOfBirthField.setObjectName("patientDateOfBirthField")
        self.gridLayout_3.addWidget(self.patientDateOfBirthField, 3, 4, 1, 1, QtCore.Qt.AlignHCenter)
        self.maritalStatusField = QtWidgets.QComboBox(self.patientInfoSection)
        sizePolicy = QtWidgets.QSizePolicy(QtWidgets.QSizePolicy.MinimumExpanding, QtWidgets.QSizePolicy.Fixed)
        sizePolicy.setHorizontalStretch(0)
        sizePolicy.setVerticalStretch(0)
        sizePolicy.setHeightForWidth(self.maritalStatusField.sizePolicy().hasHeightForWidth())
        self.maritalStatusField.setSizePolicy(sizePolicy)
        self.maritalStatusField.setObjectName("maritalStatusField")
        self.gridLayout_3.addWidget(self.maritalStatusField, 5, 1, 1, 1)
        self.patientDateOfBirthLabel = QtWidgets.QLabel(self.patientInfoSection)
        sizePolicy = QtWidgets.QSizePolicy(QtWidgets.QSizePolicy.Fixed, QtWidgets.QSizePolicy.Fixed)
        sizePolicy.setHorizontalStretch(0)
        sizePolicy.setVerticalStretch(0)
        sizePolicy.setHeightForWidth(self.patientDateOfBirthLabel.sizePolicy().hasHeightForWidth())
        self.patientDateOfBirthLabel.setSizePolicy(sizePolicy)
        font = QtGui.QFont()
        font.setFamily("Times New Roman")
        font.setPointSize(11)
        font.setBold(False)
        font.setItalic(False)
        font.setUnderline(False)
        font.setWeight(50)
        font.setStrikeOut(False)
        self.patientDateOfBirthLabel.setFont(font)
        self.patientDateOfBirthLabel.setObjectName("patientDateOfBirthLabel")
        self.gridLayout_3.addWidget(self.patientDateOfBirthLabel, 3, 3, 1, 1, QtCore.Qt.AlignHCenter)
        spacerItem8 = QtWidgets.QSpacerItem(40, 20, QtWidgets.QSizePolicy.Fixed, QtWidgets.QSizePolicy.Minimum)
        self.gridLayout_3.addItem(spacerItem8, 10, 2, 1, 1)
        self.breastFeedingHistoryLabel = QtWidgets.QLabel(self.patientInfoSection)
        sizePolicy = QtWidgets.QSizePolicy(QtWidgets.QSizePolicy.Fixed, QtWidgets.QSizePolicy.Fixed)
        sizePolicy.setHorizontalStretch(0)
        sizePolicy.setVerticalStretch(0)
        sizePolicy.setHeightForWidth(self.breastFeedingHistoryLabel.sizePolicy().hasHeightForWidth())
        self.breastFeedingHistoryLabel.setSizePolicy(sizePolicy)
        self.breastFeedingHistoryLabel.setObjectName("breastFeedingHistoryLabel")
        self.gridLayout_3.addWidget(self.breastFeedingHistoryLabel, 5, 3, 1, 1, QtCore.Qt.AlignHCenter)
        spacerItem9 = QtWidgets.QSpacerItem(40, 20, QtWidgets.QSizePolicy.Fixed, QtWidgets.QSizePolicy.Minimum)
        self.gridLayout_3.addItem(spacerItem9, 3, 5, 1, 1)
        self.patientNameLabel = QtWidgets.QLabel(self.patientInfoSection)
        sizePolicy = QtWidgets.QSizePolicy(QtWidgets.QSizePolicy.Fixed, QtWidgets.QSizePolicy.Fixed)
        sizePolicy.setHorizontalStretch(0)
        sizePolicy.setVerticalStretch(0)
        sizePolicy.setHeightForWidth(self.patientNameLabel.sizePolicy().hasHeightForWidth())
        self.patientNameLabel.setSizePolicy(sizePolicy)
        font = QtGui.QFont()
        font.setFamily("Times New Roman")
        font.setPointSize(11)
        font.setBold(False)
        font.setItalic(False)
        font.setUnderline(False)
        font.setWeight(50)
        font.setStrikeOut(False)
        self.patientNameLabel.setFont(font)
        self.patientNameLabel.setContextMenuPolicy(QtCore.Qt.DefaultContextMenu)
        self.patientNameLabel.setObjectName("patientNameLabel")
        self.gridLayout_3.addWidget(self.patientNameLabel, 3, 0, 1, 1, QtCore.Qt.AlignHCenter)
        spacerItem10 = QtWidgets.QSpacerItem(20, 20, QtWidgets.QSizePolicy.Minimum, QtWidgets.QSizePolicy.Fixed)
        self.gridLayout_3.addItem(spacerItem10, 9, 0, 1, 1)
        self.ageField = QtWidgets.QLineEdit(self.patientInfoSection)
        self.ageField.setEnabled(False)
        sizePolicy = QtWidgets.QSizePolicy(QtWidgets.QSizePolicy.MinimumExpanding, QtWidgets.QSizePolicy.Fixed)
        sizePolicy.setHorizontalStretch(0)
        sizePolicy.setVerticalStretch(0)
        sizePolicy.setHeightForWidth(self.ageField.sizePolicy().hasHeightForWidth())
        self.ageField.setSizePolicy(sizePolicy)
        self.ageField.setMaximumSize(QtCore.QSize(30, 16777215))
        self.ageField.setObjectName("ageField")
        self.gridLayout_3.addWidget(self.ageField, 3, 7, 1, 1, QtCore.Qt.AlignHCenter)
        self.referredByField = QtWidgets.QLineEdit(self.patientInfoSection)
        sizePolicy = QtWidgets.QSizePolicy(QtWidgets.QSizePolicy.MinimumExpanding, QtWidgets.QSizePolicy.Fixed)
        sizePolicy.setHorizontalStretch(0)
        sizePolicy.setVerticalStretch(0)
        sizePolicy.setHeightForWidth(self.referredByField.sizePolicy().hasHeightForWidth())
        self.referredByField.setSizePolicy(sizePolicy)
        font = QtGui.QFont()
        font.setFamily("Times New Roman")
        font.setPointSize(11)
        font.setBold(False)
        font.setItalic(False)
        font.setUnderline(False)
        font.setWeight(50)
        font.setStrikeOut(False)
        self.referredByField.setFont(font)
        self.referredByField.setObjectName("referredByField")
        self.gridLayout_3.addWidget(self.referredByField, 1, 4, 1, 4)
        spacerItem11 = QtWidgets.QSpacerItem(40, 20, QtWidgets.QSizePolicy.Fixed, QtWidgets.QSizePolicy.Minimum)
        self.gridLayout_3.addItem(spacerItem11, 7, 8, 1, 1)
        spacerItem12 = QtWidgets.QSpacerItem(40, 20, QtWidgets.QSizePolicy.Fixed, QtWidgets.QSizePolicy.Minimum)
        self.gridLayout_3.addItem(spacerItem12, 5, 8, 1, 1)
        self.patientNameField = QtWidgets.QLineEdit(self.patientInfoSection)
        sizePolicy = QtWidgets.QSizePolicy(QtWidgets.QSizePolicy.MinimumExpanding, QtWidgets.QSizePolicy.Fixed)
        sizePolicy.setHorizontalStretch(0)
        sizePolicy.setVerticalStretch(0)
        sizePolicy.setHeightForWidth(self.patientNameField.sizePolicy().hasHeightForWidth())
        self.patientNameField.setSizePolicy(sizePolicy)
        font = QtGui.QFont()
        font.setFamily("Times New Roman")
        font.setPointSize(11)
        font.setBold(False)
        font.setItalic(False)
        font.setUnderline(False)
        font.setWeight(50)
        font.setStrikeOut(False)
        self.patientNameField.setFont(font)
        self.patientNameField.setObjectName("patientNameField")
        self.gridLayout_3.addWidget(self.patientNameField, 3, 1, 1, 1)
        self.radiationHistoryField = QtWidgets.QComboBox(self.patientInfoSection)
        sizePolicy = QtWidgets.QSizePolicy(QtWidgets.QSizePolicy.MinimumExpanding, QtWidgets.QSizePolicy.Fixed)
        sizePolicy.setHorizontalStretch(0)
        sizePolicy.setVerticalStretch(0)
        sizePolicy.setHeightForWidth(self.radiationHistoryField.sizePolicy().hasHeightForWidth())
        self.radiationHistoryField.setSizePolicy(sizePolicy)
        self.radiationHistoryField.setObjectName("radiationHistoryField")
        self.gridLayout_3.addWidget(self.radiationHistoryField, 10, 1, 1, 1)
        self.bcFamilyHistoryField = QtWidgets.QComboBox(self.patientInfoSection)
        sizePolicy = QtWidgets.QSizePolicy(QtWidgets.QSizePolicy.MinimumExpanding, QtWidgets.QSizePolicy.Fixed)
        sizePolicy.setHorizontalStretch(0)
        sizePolicy.setVerticalStretch(0)
        sizePolicy.setHeightForWidth(self.bcFamilyHistoryField.sizePolicy().hasHeightForWidth())
        self.bcFamilyHistoryField.setSizePolicy(sizePolicy)
        self.bcFamilyHistoryField.setObjectName("bcFamilyHistoryField")
        self.gridLayout_3.addWidget(self.bcFamilyHistoryField, 7, 1, 1, 1)
        self.ageDuringFirstPregnancyLabel = QtWidgets.QLabel(self.patientInfoSection)
        sizePolicy = QtWidgets.QSizePolicy(QtWidgets.QSizePolicy.Fixed, QtWidgets.QSizePolicy.Fixed)
        sizePolicy.setHorizontalStretch(0)
        sizePolicy.setVerticalStretch(0)
        sizePolicy.setHeightForWidth(self.ageDuringFirstPregnancyLabel.sizePolicy().hasHeightForWidth())
        self.ageDuringFirstPregnancyLabel.setSizePolicy(sizePolicy)
        self.ageDuringFirstPregnancyLabel.setObjectName("ageDuringFirstPregnancyLabel")
        self.gridLayout_3.addWidget(self.ageDuringFirstPregnancyLabel, 5, 9, 1, 1)
        self.breastProfileLabel = QtWidgets.QLabel(self.patientInfoSection)
        sizePolicy = QtWidgets.QSizePolicy(QtWidgets.QSizePolicy.Fixed, QtWidgets.QSizePolicy.Fixed)
        sizePolicy.setHorizontalStretch(0)
        sizePolicy.setVerticalStretch(0)
        sizePolicy.setHeightForWidth(self.breastProfileLabel.sizePolicy().hasHeightForWidth())
        self.breastProfileLabel.setSizePolicy(sizePolicy)
        self.breastProfileLabel.setObjectName("breastProfileLabel")
        self.gridLayout_3.addWidget(self.breastProfileLabel, 7, 9, 1, 1, QtCore.Qt.AlignHCenter)
        self.mobileNumberLabel = QtWidgets.QLabel(self.patientInfoSection)
        sizePolicy = QtWidgets.QSizePolicy(QtWidgets.QSizePolicy.Fixed, QtWidgets.QSizePolicy.Fixed)
        sizePolicy.setHorizontalStretch(0)
        sizePolicy.setVerticalStretch(0)
        sizePolicy.setHeightForWidth(self.mobileNumberLabel.sizePolicy().hasHeightForWidth())
        self.mobileNumberLabel.setSizePolicy(sizePolicy)
        self.mobileNumberLabel.setObjectName("mobileNumberLabel")
        self.gridLayout_3.addWidget(self.mobileNumberLabel, 3, 9, 1, 1, QtCore.Qt.AlignHCenter)
        self.medicineConsumptionHistoryLabel = QtWidgets.QLabel(self.patientInfoSection)
        sizePolicy = QtWidgets.QSizePolicy(QtWidgets.QSizePolicy.Fixed, QtWidgets.QSizePolicy.Fixed)
        sizePolicy.setHorizontalStretch(0)
        sizePolicy.setVerticalStretch(0)
        sizePolicy.setHeightForWidth(self.medicineConsumptionHistoryLabel.sizePolicy().hasHeightForWidth())
        self.medicineConsumptionHistoryLabel.setSizePolicy(sizePolicy)
        self.medicineConsumptionHistoryLabel.setObjectName("medicineConsumptionHistoryLabel")
        self.gridLayout_3.addWidget(self.medicineConsumptionHistoryLabel, 10, 3, 1, 1)
        spacerItem13 = QtWidgets.QSpacerItem(20, 20, QtWidgets.QSizePolicy.Minimum, QtWidgets.QSizePolicy.Fixed)
        self.gridLayout_3.addItem(spacerItem13, 4, 0, 1, 1)
        self.ageLabel = QtWidgets.QLabel(self.patientInfoSection)
        sizePolicy = QtWidgets.QSizePolicy(QtWidgets.QSizePolicy.Fixed, QtWidgets.QSizePolicy.Fixed)
        sizePolicy.setHorizontalStretch(0)
        sizePolicy.setVerticalStretch(0)
        sizePolicy.setHeightForWidth(self.ageLabel.sizePolicy().hasHeightForWidth())
        self.ageLabel.setSizePolicy(sizePolicy)
        font = QtGui.QFont()
        font.setFamily("Times New Roman")
        font.setPointSize(11)
        font.setBold(False)
        font.setItalic(False)
        font.setUnderline(False)
        font.setWeight(50)
        font.setStrikeOut(False)
        self.ageLabel.setFont(font)
        self.ageLabel.setObjectName("ageLabel")
        self.gridLayout_3.addWidget(self.ageLabel, 3, 6, 1, 1, QtCore.Qt.AlignHCenter)
        self.patientIdLabel = QtWidgets.QLabel(self.patientInfoSection)
        sizePolicy = QtWidgets.QSizePolicy(QtWidgets.QSizePolicy.Fixed, QtWidgets.QSizePolicy.Fixed)
        sizePolicy.setHorizontalStretch(0)
        sizePolicy.setVerticalStretch(0)
        sizePolicy.setHeightForWidth(self.patientIdLabel.sizePolicy().hasHeightForWidth())
        self.patientIdLabel.setSizePolicy(sizePolicy)
        font = QtGui.QFont()
        font.setFamily("Times New Roman")
        font.setPointSize(11)
        font.setBold(False)
        font.setItalic(False)
        font.setUnderline(False)
        font.setWeight(50)
        font.setStrikeOut(False)
        self.patientIdLabel.setFont(font)
        self.patientIdLabel.setObjectName("patientIdLabel")
        self.gridLayout_3.addWidget(self.patientIdLabel, 1, 0, 1, 1, QtCore.Qt.AlignHCenter)
        spacerItem14 = QtWidgets.QSpacerItem(20, 20, QtWidgets.QSizePolicy.Minimum, QtWidgets.QSizePolicy.Fixed)
        self.gridLayout_3.addItem(spacerItem14, 6, 0, 1, 1)
        self.selfHistoryOfBCLabel = QtWidgets.QLabel(self.patientInfoSection)
        sizePolicy = QtWidgets.QSizePolicy(QtWidgets.QSizePolicy.Fixed, QtWidgets.QSizePolicy.Fixed)
        sizePolicy.setHorizontalStretch(0)
        sizePolicy.setVerticalStretch(0)
        sizePolicy.setHeightForWidth(self.selfHistoryOfBCLabel.sizePolicy().hasHeightForWidth())
        self.selfHistoryOfBCLabel.setSizePolicy(sizePolicy)
        self.selfHistoryOfBCLabel.setObjectName("selfHistoryOfBCLabel")
        self.gridLayout_3.addWidget(self.selfHistoryOfBCLabel, 7, 3, 1, 1, QtCore.Qt.AlignHCenter)
        spacerItem15 = QtWidgets.QSpacerItem(40, 20, QtWidgets.QSizePolicy.Fixed, QtWidgets.QSizePolicy.Minimum)
        self.gridLayout_3.addItem(spacerItem15, 7, 2, 1, 1)
        self.mobileNumberField = QtWidgets.QLineEdit(self.patientInfoSection)
        sizePolicy = QtWidgets.QSizePolicy(QtWidgets.QSizePolicy.MinimumExpanding, QtWidgets.QSizePolicy.Fixed)
        sizePolicy.setHorizontalStretch(0)
        sizePolicy.setVerticalStretch(0)
        sizePolicy.setHeightForWidth(self.mobileNumberField.sizePolicy().hasHeightForWidth())
        self.mobileNumberField.setSizePolicy(sizePolicy)
        self.mobileNumberField.setObjectName("mobileNumberField")
        self.gridLayout_3.addWidget(self.mobileNumberField, 3, 10, 1, 1)
        self.referredByLabel = QtWidgets.QLabel(self.patientInfoSection)
        sizePolicy = QtWidgets.QSizePolicy(QtWidgets.QSizePolicy.Fixed, QtWidgets.QSizePolicy.Fixed)
        sizePolicy.setHorizontalStretch(0)
        sizePolicy.setVerticalStretch(0)
        sizePolicy.setHeightForWidth(self.referredByLabel.sizePolicy().hasHeightForWidth())
        self.referredByLabel.setSizePolicy(sizePolicy)
        font = QtGui.QFont()
        font.setFamily("Times New Roman")
        font.setPointSize(11)
        font.setBold(False)
        font.setItalic(False)
        font.setUnderline(False)
        font.setWeight(50)
        font.setStrikeOut(False)
        self.referredByLabel.setFont(font)
        self.referredByLabel.setObjectName("referredByLabel")
        self.gridLayout_3.addWidget(self.referredByLabel, 1, 3, 1, 1, QtCore.Qt.AlignHCenter)
        self.currentDateField = QtWidgets.QDateEdit(self.patientInfoSection)
        self.currentDateField.setEnabled(False)
        sizePolicy = QtWidgets.QSizePolicy(QtWidgets.QSizePolicy.MinimumExpanding, QtWidgets.QSizePolicy.Fixed)
        sizePolicy.setHorizontalStretch(0)
        sizePolicy.setVerticalStretch(0)
        sizePolicy.setHeightForWidth(self.currentDateField.sizePolicy().hasHeightForWidth())
        self.currentDateField.setSizePolicy(sizePolicy)
        font = QtGui.QFont()
        font.setFamily("Times New Roman")
        font.setPointSize(11)
        font.setBold(False)
        font.setItalic(False)
        font.setUnderline(False)
        font.setWeight(50)
        font.setStrikeOut(False)
        self.currentDateField.setFont(font)
        self.currentDateField.setCalendarPopup(True)
        self.currentDateField.setObjectName("currentDateField")
        self.gridLayout_3.addWidget(self.currentDateField, 1, 10, 1, 1)
        spacerItem16 = QtWidgets.QSpacerItem(20, 20, QtWidgets.QSizePolicy.Minimum, QtWidgets.QSizePolicy.Fixed)
        self.gridLayout_3.addItem(spacerItem16, 11, 9, 1, 1)
        self.specialRemarksLabel = QtWidgets.QLabel(self.patientInfoSection)
        sizePolicy = QtWidgets.QSizePolicy(QtWidgets.QSizePolicy.Fixed, QtWidgets.QSizePolicy.Fixed)
        sizePolicy.setHorizontalStretch(0)
        sizePolicy.setVerticalStretch(0)
        sizePolicy.setHeightForWidth(self.specialRemarksLabel.sizePolicy().hasHeightForWidth())
        self.specialRemarksLabel.setSizePolicy(sizePolicy)
        self.specialRemarksLabel.setObjectName("specialRemarksLabel")
        self.gridLayout_3.addWidget(self.specialRemarksLabel, 12, 0, 1, 1, QtCore.Qt.AlignHCenter)
        self.specialRemarksField = QtWidgets.QTextEdit(self.patientInfoSection)
        sizePolicy = QtWidgets.QSizePolicy(QtWidgets.QSizePolicy.MinimumExpanding, QtWidgets.QSizePolicy.Fixed)
        sizePolicy.setHorizontalStretch(0)
        sizePolicy.setVerticalStretch(0)
        sizePolicy.setHeightForWidth(self.specialRemarksField.sizePolicy().hasHeightForWidth())
        self.specialRemarksField.setSizePolicy(sizePolicy)
        self.specialRemarksField.setObjectName("specialRemarksField")
        self.gridLayout_3.addWidget(self.specialRemarksField, 12, 1, 1, 1)
        self.medicalHistoryMeterLabel = QtWidgets.QLabel(self.patientInfoSection)
        sizePolicy = QtWidgets.QSizePolicy(QtWidgets.QSizePolicy.MinimumExpanding, QtWidgets.QSizePolicy.MinimumExpanding)
        sizePolicy.setHorizontalStretch(0)
        sizePolicy.setVerticalStretch(0)
        sizePolicy.setHeightForWidth(self.medicalHistoryMeterLabel.sizePolicy().hasHeightForWidth())
        self.medicalHistoryMeterLabel.setSizePolicy(sizePolicy)
        self.medicalHistoryMeterLabel.setFrameShape(QtWidgets.QFrame.NoFrame)
        self.medicalHistoryMeterLabel.setFrameShadow(QtWidgets.QFrame.Raised)
        self.medicalHistoryMeterLabel.setLineWidth(0)
        self.medicalHistoryMeterLabel.setAlignment(QtCore.Qt.AlignCenter)
        self.medicalHistoryMeterLabel.setObjectName("medicalHistoryMeterLabel")
        self.gridLayout_3.addWidget(self.medicalHistoryMeterLabel, 12, 10, 1, 1, QtCore.Qt.AlignRight)
        self.gridLayout_2.addWidget(self.patientInfoSection, 1, 0, 1, 4)
        spacerItem17 = QtWidgets.QSpacerItem(20, 40, QtWidgets.QSizePolicy.Minimum, QtWidgets.QSizePolicy.Fixed)
        self.gridLayout_2.addItem(spacerItem17, 2, 0, 1, 1)
        self.patientDiagnosticSection = QtWidgets.QGroupBox(self.scrollAreaWidgetContents)
        sizePolicy = QtWidgets.QSizePolicy(QtWidgets.QSizePolicy.MinimumExpanding, QtWidgets.QSizePolicy.Preferred)
        sizePolicy.setHorizontalStretch(0)
        sizePolicy.setVerticalStretch(0)
        sizePolicy.setHeightForWidth(self.patientDiagnosticSection.sizePolicy().hasHeightForWidth())
        self.patientDiagnosticSection.setSizePolicy(sizePolicy)
        self.patientDiagnosticSection.setMinimumSize(QtCore.QSize(0, 0))
        font = QtGui.QFont()
        font.setFamily("Times New Roman")
        font.setPointSize(11)
        font.setItalic(False)
        self.patientDiagnosticSection.setFont(font)
        self.patientDiagnosticSection.setObjectName("patientDiagnosticSection")
        self.gridLayout_4 = QtWidgets.QGridLayout(self.patientDiagnosticSection)
        self.gridLayout_4.setObjectName("gridLayout_4")
        self.diagnosticBreastProfileField = QtWidgets.QComboBox(self.patientDiagnosticSection)
        sizePolicy = QtWidgets.QSizePolicy(QtWidgets.QSizePolicy.MinimumExpanding, QtWidgets.QSizePolicy.Fixed)
        sizePolicy.setHorizontalStretch(0)
        sizePolicy.setVerticalStretch(0)
        sizePolicy.setHeightForWidth(self.diagnosticBreastProfileField.sizePolicy().hasHeightForWidth())
        self.diagnosticBreastProfileField.setSizePolicy(sizePolicy)
        self.diagnosticBreastProfileField.setObjectName("diagnosticBreastProfileField")
        self.gridLayout_4.addWidget(self.diagnosticBreastProfileField, 5, 1, 1, 1)
        self.diagnostic1CLabel = QtWidgets.QLabel(self.patientDiagnosticSection)
        sizePolicy = QtWidgets.QSizePolicy(QtWidgets.QSizePolicy.Fixed, QtWidgets.QSizePolicy.Fixed)
        sizePolicy.setHorizontalStretch(0)
        sizePolicy.setVerticalStretch(0)
        sizePolicy.setHeightForWidth(self.diagnostic1CLabel.sizePolicy().hasHeightForWidth())
        self.diagnostic1CLabel.setSizePolicy(sizePolicy)
        self.diagnostic1CLabel.setObjectName("diagnostic1CLabel")
        self.gridLayout_4.addWidget(self.diagnostic1CLabel, 3, 0, 1, 1, QtCore.Qt.AlignHCenter)
        self.diagnosticAsymmetryLabel = QtWidgets.QLabel(self.patientDiagnosticSection)
        sizePolicy = QtWidgets.QSizePolicy(QtWidgets.QSizePolicy.Fixed, QtWidgets.QSizePolicy.Fixed)
        sizePolicy.setHorizontalStretch(0)
        sizePolicy.setVerticalStretch(0)
        sizePolicy.setHeightForWidth(self.diagnosticAsymmetryLabel.sizePolicy().hasHeightForWidth())
        self.diagnosticAsymmetryLabel.setSizePolicy(sizePolicy)
        self.diagnosticAsymmetryLabel.setObjectName("diagnosticAsymmetryLabel")
        self.gridLayout_4.addWidget(self.diagnosticAsymmetryLabel, 1, 0, 1, 1)
        spacerItem18 = QtWidgets.QSpacerItem(20, 20, QtWidgets.QSizePolicy.Minimum, QtWidgets.QSizePolicy.Fixed)
        self.gridLayout_4.addItem(spacerItem18, 4, 0, 1, 1)
        spacerItem19 = QtWidgets.QSpacerItem(20, 20, QtWidgets.QSizePolicy.Minimum, QtWidgets.QSizePolicy.Fixed)
        self.gridLayout_4.addItem(spacerItem19, 0, 0, 1, 1)
        self.diagnosticCurvePatternField = QtWidgets.QComboBox(self.patientDiagnosticSection)
        sizePolicy = QtWidgets.QSizePolicy(QtWidgets.QSizePolicy.MinimumExpanding, QtWidgets.QSizePolicy.Fixed)
        sizePolicy.setHorizontalStretch(0)
        sizePolicy.setVerticalStretch(0)
        sizePolicy.setHeightForWidth(self.diagnosticCurvePatternField.sizePolicy().hasHeightForWidth())
        self.diagnosticCurvePatternField.setSizePolicy(sizePolicy)
        self.diagnosticCurvePatternField.setObjectName("diagnosticCurvePatternField")
        self.gridLayout_4.addWidget(self.diagnosticCurvePatternField, 1, 4, 1, 1)
        self.diagnostic1CField = QtWidgets.QComboBox(self.patientDiagnosticSection)
        sizePolicy = QtWidgets.QSizePolicy(QtWidgets.QSizePolicy.MinimumExpanding, QtWidgets.QSizePolicy.Fixed)
        sizePolicy.setHorizontalStretch(0)
        sizePolicy.setVerticalStretch(0)
        sizePolicy.setHeightForWidth(self.diagnostic1CField.sizePolicy().hasHeightForWidth())
        self.diagnostic1CField.setSizePolicy(sizePolicy)
        self.diagnostic1CField.setObjectName("diagnostic1CField")
        self.gridLayout_4.addWidget(self.diagnostic1CField, 3, 1, 1, 1)
        self.diagnosticBreastProfileLabel = QtWidgets.QLabel(self.patientDiagnosticSection)
        self.diagnosticBreastProfileLabel.setObjectName("diagnosticBreastProfileLabel")
        self.gridLayout_4.addWidget(self.diagnosticBreastProfileLabel, 5, 0, 1, 1)
        self.diagnosticPinpointField = QtWidgets.QComboBox(self.patientDiagnosticSection)
        sizePolicy = QtWidgets.QSizePolicy(QtWidgets.QSizePolicy.MinimumExpanding, QtWidgets.QSizePolicy.Fixed)
        sizePolicy.setHorizontalStretch(0)
        sizePolicy.setVerticalStretch(0)
        sizePolicy.setHeightForWidth(self.diagnosticPinpointField.sizePolicy().hasHeightForWidth())
        self.diagnosticPinpointField.setSizePolicy(sizePolicy)
        self.diagnosticPinpointField.setObjectName("diagnosticPinpointField")
        self.gridLayout_4.addWidget(self.diagnosticPinpointField, 3, 6, 1, 1)
        self.diagnosticMeterReadingLabel = QtWidgets.QLabel(self.patientDiagnosticSection)
        sizePolicy = QtWidgets.QSizePolicy(QtWidgets.QSizePolicy.Fixed, QtWidgets.QSizePolicy.Fixed)
        sizePolicy.setHorizontalStretch(0)
        sizePolicy.setVerticalStretch(0)
        sizePolicy.setHeightForWidth(self.diagnosticMeterReadingLabel.sizePolicy().hasHeightForWidth())
        self.diagnosticMeterReadingLabel.setSizePolicy(sizePolicy)
        self.diagnosticMeterReadingLabel.setMinimumSize(QtCore.QSize(0, 0))
        self.diagnosticMeterReadingLabel.setObjectName("diagnosticMeterReadingLabel")
        self.gridLayout_4.addWidget(self.diagnosticMeterReadingLabel, 7, 5, 1, 1, QtCore.Qt.AlignHCenter)
        self.diagnosticFUniqueLabel = QtWidgets.QLabel(self.patientDiagnosticSection)
        sizePolicy = QtWidgets.QSizePolicy(QtWidgets.QSizePolicy.Fixed, QtWidgets.QSizePolicy.Fixed)
        sizePolicy.setHorizontalStretch(0)
        sizePolicy.setVerticalStretch(0)
        sizePolicy.setHeightForWidth(self.diagnosticFUniqueLabel.sizePolicy().hasHeightForWidth())
        self.diagnosticFUniqueLabel.setSizePolicy(sizePolicy)
        self.diagnosticFUniqueLabel.setObjectName("diagnosticFUniqueLabel")
        self.gridLayout_4.addWidget(self.diagnosticFUniqueLabel, 5, 5, 1, 1, QtCore.Qt.AlignHCenter)
        self.diagnosticHyperthermiaLabel = QtWidgets.QLabel(self.patientDiagnosticSection)
        sizePolicy = QtWidgets.QSizePolicy(QtWidgets.QSizePolicy.Fixed, QtWidgets.QSizePolicy.Fixed)
        sizePolicy.setHorizontalStretch(0)
        sizePolicy.setVerticalStretch(0)
        sizePolicy.setHeightForWidth(self.diagnosticHyperthermiaLabel.sizePolicy().hasHeightForWidth())
        self.diagnosticHyperthermiaLabel.setSizePolicy(sizePolicy)
        self.diagnosticHyperthermiaLabel.setObjectName("diagnosticHyperthermiaLabel")
        self.gridLayout_4.addWidget(self.diagnosticHyperthermiaLabel, 1, 5, 1, 1, QtCore.Qt.AlignHCenter)
        self.diagnosticMeterReadingField = QtWidgets.QLCDNumber(self.patientDiagnosticSection)
        sizePolicy = QtWidgets.QSizePolicy(QtWidgets.QSizePolicy.MinimumExpanding, QtWidgets.QSizePolicy.Fixed)
        sizePolicy.setHorizontalStretch(0)
        sizePolicy.setVerticalStretch(0)
        sizePolicy.setHeightForWidth(self.diagnosticMeterReadingField.sizePolicy().hasHeightForWidth())
        self.diagnosticMeterReadingField.setSizePolicy(sizePolicy)
        self.diagnosticMeterReadingField.setMinimumSize(QtCore.QSize(0, 60))
        self.diagnosticMeterReadingField.setFrameShape(QtWidgets.QFrame.WinPanel)
        self.diagnosticMeterReadingField.setFrameShadow(QtWidgets.QFrame.Plain)
        self.diagnosticMeterReadingField.setLineWidth(5)
        self.diagnosticMeterReadingField.setMidLineWidth(0)
        self.diagnosticMeterReadingField.setSmallDecimalPoint(False)
        self.diagnosticMeterReadingField.setProperty("intValue", 0)
        self.diagnosticMeterReadingField.setObjectName("diagnosticMeterReadingField")
        self.gridLayout_4.addWidget(self.diagnosticMeterReadingField, 7, 6, 1, 1)
        spacerItem20 = QtWidgets.QSpacerItem(20, 20, QtWidgets.QSizePolicy.Minimum, QtWidgets.QSizePolicy.Fixed)
        self.gridLayout_4.addItem(spacerItem20, 6, 0, 1, 1)
        self.diagnosticAsymmetryField = QtWidgets.QComboBox(self.patientDiagnosticSection)
        sizePolicy = QtWidgets.QSizePolicy(QtWidgets.QSizePolicy.MinimumExpanding, QtWidgets.QSizePolicy.Fixed)
        sizePolicy.setHorizontalStretch(0)
        sizePolicy.setVerticalStretch(0)
        sizePolicy.setHeightForWidth(self.diagnosticAsymmetryField.sizePolicy().hasHeightForWidth())
        self.diagnosticAsymmetryField.setSizePolicy(sizePolicy)
        self.diagnosticAsymmetryField.setObjectName("diagnosticAsymmetryField")
        self.gridLayout_4.addWidget(self.diagnosticAsymmetryField, 1, 1, 1, 1)
        self.diagnosticFurrowLabel = QtWidgets.QLabel(self.patientDiagnosticSection)
        sizePolicy = QtWidgets.QSizePolicy(QtWidgets.QSizePolicy.Fixed, QtWidgets.QSizePolicy.Fixed)
        sizePolicy.setHorizontalStretch(0)
        sizePolicy.setVerticalStretch(0)
        sizePolicy.setHeightForWidth(self.diagnosticFurrowLabel.sizePolicy().hasHeightForWidth())
        self.diagnosticFurrowLabel.setSizePolicy(sizePolicy)
        self.diagnosticFurrowLabel.setObjectName("diagnosticFurrowLabel")
        self.gridLayout_4.addWidget(self.diagnosticFurrowLabel, 3, 3, 1, 1, QtCore.Qt.AlignHCenter)
        self.diagnosticPinpointLabel = QtWidgets.QLabel(self.patientDiagnosticSection)
        sizePolicy = QtWidgets.QSizePolicy(QtWidgets.QSizePolicy.Fixed, QtWidgets.QSizePolicy.Fixed)
        sizePolicy.setHorizontalStretch(0)
        sizePolicy.setVerticalStretch(0)
        sizePolicy.setHeightForWidth(self.diagnosticPinpointLabel.sizePolicy().hasHeightForWidth())
        self.diagnosticPinpointLabel.setSizePolicy(sizePolicy)
        self.diagnosticPinpointLabel.setObjectName("diagnosticPinpointLabel")
        self.gridLayout_4.addWidget(self.diagnosticPinpointLabel, 3, 5, 1, 1, QtCore.Qt.AlignHCenter)
        spacerItem21 = QtWidgets.QSpacerItem(80, 20, QtWidgets.QSizePolicy.Fixed, QtWidgets.QSizePolicy.Minimum)
        self.gridLayout_4.addItem(spacerItem21, 1, 2, 1, 1)
        self.diagnosticFUniqueField = QtWidgets.QComboBox(self.patientDiagnosticSection)
        sizePolicy = QtWidgets.QSizePolicy(QtWidgets.QSizePolicy.MinimumExpanding, QtWidgets.QSizePolicy.Fixed)
        sizePolicy.setHorizontalStretch(0)
        sizePolicy.setVerticalStretch(0)
        sizePolicy.setHeightForWidth(self.diagnosticFUniqueField.sizePolicy().hasHeightForWidth())
        self.diagnosticFUniqueField.setSizePolicy(sizePolicy)
        self.diagnosticFUniqueField.setObjectName("diagnosticFUniqueField")
        self.gridLayout_4.addWidget(self.diagnosticFUniqueField, 5, 6, 1, 1)
        spacerItem22 = QtWidgets.QSpacerItem(80, 20, QtWidgets.QSizePolicy.Fixed, QtWidgets.QSizePolicy.Minimum)
        self.gridLayout_4.addItem(spacerItem22, 5, 2, 1, 1)
        self.diagnosticFurrowField = QtWidgets.QComboBox(self.patientDiagnosticSection)
        sizePolicy = QtWidgets.QSizePolicy(QtWidgets.QSizePolicy.MinimumExpanding, QtWidgets.QSizePolicy.Fixed)
        sizePolicy.setHorizontalStretch(0)
        sizePolicy.setVerticalStretch(0)
        sizePolicy.setHeightForWidth(self.diagnosticFurrowField.sizePolicy().hasHeightForWidth())
        self.diagnosticFurrowField.setSizePolicy(sizePolicy)
        self.diagnosticFurrowField.setObjectName("diagnosticFurrowField")
        self.gridLayout_4.addWidget(self.diagnosticFurrowField, 3, 4, 1, 1)
        spacerItem23 = QtWidgets.QSpacerItem(20, 20, QtWidgets.QSizePolicy.Minimum, QtWidgets.QSizePolicy.Fixed)
        self.gridLayout_4.addItem(spacerItem23, 2, 0, 1, 1)
        self.diagnosticCurvePatternLabel = QtWidgets.QLabel(self.patientDiagnosticSection)
        sizePolicy = QtWidgets.QSizePolicy(QtWidgets.QSizePolicy.Fixed, QtWidgets.QSizePolicy.Fixed)
        sizePolicy.setHorizontalStretch(0)
        sizePolicy.setVerticalStretch(0)
        sizePolicy.setHeightForWidth(self.diagnosticCurvePatternLabel.sizePolicy().hasHeightForWidth())
        self.diagnosticCurvePatternLabel.setSizePolicy(sizePolicy)
        self.diagnosticCurvePatternLabel.setObjectName("diagnosticCurvePatternLabel")
        self.gridLayout_4.addWidget(self.diagnosticCurvePatternLabel, 1, 3, 1, 1)
        self.diagnosticAgeField = QtWidgets.QComboBox(self.patientDiagnosticSection)
        sizePolicy = QtWidgets.QSizePolicy(QtWidgets.QSizePolicy.MinimumExpanding, QtWidgets.QSizePolicy.Fixed)
        sizePolicy.setHorizontalStretch(0)
        sizePolicy.setVerticalStretch(0)
        sizePolicy.setHeightForWidth(self.diagnosticAgeField.sizePolicy().hasHeightForWidth())
        self.diagnosticAgeField.setSizePolicy(sizePolicy)
        self.diagnosticAgeField.setObjectName("diagnosticAgeField")
        self.gridLayout_4.addWidget(self.diagnosticAgeField, 5, 4, 1, 1)
        self.diagnosticHyperthermiaField = QtWidgets.QComboBox(self.patientDiagnosticSection)
        sizePolicy = QtWidgets.QSizePolicy(QtWidgets.QSizePolicy.MinimumExpanding, QtWidgets.QSizePolicy.Fixed)
        sizePolicy.setHorizontalStretch(0)
        sizePolicy.setVerticalStretch(0)
        sizePolicy.setHeightForWidth(self.diagnosticHyperthermiaField.sizePolicy().hasHeightForWidth())
        self.diagnosticHyperthermiaField.setSizePolicy(sizePolicy)
        self.diagnosticHyperthermiaField.setMinimumSize(QtCore.QSize(0, 0))
        self.diagnosticHyperthermiaField.setObjectName("diagnosticHyperthermiaField")
        self.gridLayout_4.addWidget(self.diagnosticHyperthermiaField, 1, 6, 1, 1)
        self.diagnosticAgeLabel = QtWidgets.QLabel(self.patientDiagnosticSection)
        self.diagnosticAgeLabel.setObjectName("diagnosticAgeLabel")
        self.gridLayout_4.addWidget(self.diagnosticAgeLabel, 5, 3, 1, 1, QtCore.Qt.AlignHCenter)
        spacerItem24 = QtWidgets.QSpacerItem(80, 20, QtWidgets.QSizePolicy.Fixed, QtWidgets.QSizePolicy.Minimum)
        self.gridLayout_4.addItem(spacerItem24, 3, 2, 1, 1)
        self.gridLayout_2.addWidget(self.patientDiagnosticSection, 3, 0, 1, 4)
        spacerItem25 = QtWidgets.QSpacerItem(20, 60, QtWidgets.QSizePolicy.Minimum, QtWidgets.QSizePolicy.Fixed)
        self.gridLayout_2.addItem(spacerItem25, 4, 2, 1, 1)
        self.loadImagesButton = QtWidgets.QPushButton(self.scrollAreaWidgetContents)
        sizePolicy = QtWidgets.QSizePolicy(QtWidgets.QSizePolicy.Fixed, QtWidgets.QSizePolicy.Fixed)
        sizePolicy.setHorizontalStretch(0)
        sizePolicy.setVerticalStretch(0)
        sizePolicy.setHeightForWidth(self.loadImagesButton.sizePolicy().hasHeightForWidth())
        self.loadImagesButton.setSizePolicy(sizePolicy)
        self.loadImagesButton.setObjectName("loadImagesButton")
        self.gridLayout_2.addWidget(self.loadImagesButton, 5, 2, 1, 1, QtCore.Qt.AlignRight)
        self.saveInformationButton = QtWidgets.QPushButton(self.scrollAreaWidgetContents)
        sizePolicy = QtWidgets.QSizePolicy(QtWidgets.QSizePolicy.Fixed, QtWidgets.QSizePolicy.Fixed)
        sizePolicy.setHorizontalStretch(0)
        sizePolicy.setVerticalStretch(0)
        sizePolicy.setHeightForWidth(self.saveInformationButton.sizePolicy().hasHeightForWidth())
        self.saveInformationButton.setSizePolicy(sizePolicy)
        self.saveInformationButton.setObjectName("saveInformationButton")
        self.gridLayout_2.addWidget(self.saveInformationButton, 5, 1, 1, 1, QtCore.Qt.AlignRight)
        self.scrollArea.setWidget(self.scrollAreaWidgetContents)
        self.gridLayout.addWidget(self.scrollArea, 0, 0, 1, 1)
        patientDataScreenWindow.setCentralWidget(self.centralwidget)
        self.statusbar = QtWidgets.QStatusBar(patientDataScreenWindow)
        self.statusbar.setObjectName("statusbar")
        patientDataScreenWindow.setStatusBar(self.statusbar)

        self.retranslateUi(patientDataScreenWindow)
        QtCore.QMetaObject.connectSlotsByName(patientDataScreenWindow)

        self.window = patientDataScreenWindow
        
        self.setupWidgets()
        
        if self.cache.id is None:
            self.cache.generatePatientID()
            self.patientIdField.setText(self.cache.id)
        else:
            self.readInformationFromDatabaseAndUpload()
        
        self.preprocessScreen()
        
    def retranslateUi(self, patientDataScreenWindow):
        _translate = QtCore.QCoreApplication.translate
        patientDataScreenWindow.setWindowTitle(_translate("patientDataScreenWindow", "Patient Data Screen"))
        self.backButton.setText(_translate("patientDataScreenWindow", "Go back to Main Menu"))
        self.patientInfoSection.setTitle(_translate("patientDataScreenWindow", "Patient Information Section"))
        self.radiationHistoryLabel.setText(_translate("patientDataScreenWindow", "Radiation History"))
        self.currentDatelabel.setText(_translate("patientDataScreenWindow", "Current Date"))
        self.maritalStatusLabel.setText(_translate("patientDataScreenWindow", "Marital Status"))
        self.bcFamilyHistoryLabel.setText(_translate("patientDataScreenWindow", "BC Family History"))
        self.patientDateOfBirthLabel.setText(_translate("patientDataScreenWindow", "Date of Birth"))
        self.breastFeedingHistoryLabel.setText(_translate("patientDataScreenWindow", "Breast Feeding History"))
        self.patientNameLabel.setText(_translate("patientDataScreenWindow", "Patient Name"))
        self.ageDuringFirstPregnancyLabel.setText(_translate("patientDataScreenWindow", "Age during first Pregnancy"))
        self.breastProfileLabel.setText(_translate("patientDataScreenWindow", "Breast Profile"))
        self.mobileNumberLabel.setText(_translate("patientDataScreenWindow", "Mobile Number"))
        self.medicineConsumptionHistoryLabel.setText(_translate("patientDataScreenWindow", "Medicine Consumption History"))
        self.ageLabel.setText(_translate("patientDataScreenWindow", "Age"))
        self.patientIdLabel.setText(_translate("patientDataScreenWindow", "Patient ID"))
        self.selfHistoryOfBCLabel.setText(_translate("patientDataScreenWindow", "Self history of BC"))
        self.referredByLabel.setText(_translate("patientDataScreenWindow", "Referred By"))
        self.specialRemarksLabel.setText(_translate("patientDataScreenWindow", "C/P"))
        self.medicalHistoryMeterLabel.setText(_translate("patientDataScreenWindow", "Medical history meter\n"
"image holder label"))
        self.patientDiagnosticSection.setTitle(_translate("patientDataScreenWindow", "Diagnostic Meter Section"))
        self.diagnostic1CLabel.setText(_translate("patientDataScreenWindow", "1C"))
        self.diagnosticAsymmetryLabel.setText(_translate("patientDataScreenWindow", "Asymmetry"))
        self.diagnosticBreastProfileLabel.setText(_translate("patientDataScreenWindow", "Breast Profile"))
        self.diagnosticMeterReadingLabel.setText(_translate("patientDataScreenWindow", "Diagnostic Meter Reading"))
        self.diagnosticFUniqueLabel.setText(_translate("patientDataScreenWindow", "F Unique"))
        self.diagnosticHyperthermiaLabel.setText(_translate("patientDataScreenWindow", "Hyperthermia"))
        self.diagnosticFurrowLabel.setText(_translate("patientDataScreenWindow", "Furrow"))
        self.diagnosticPinpointLabel.setText(_translate("patientDataScreenWindow", "Pinpoint"))
        self.diagnosticCurvePatternLabel.setText(_translate("patientDataScreenWindow", "Curve Pattern"))
        self.diagnosticAgeLabel.setText(_translate("patientDataScreenWindow", "Age"))
        self.loadImagesButton.setText(_translate("patientDataScreenWindow", "Proceed to Load Images"))
        self.saveInformationButton.setText(_translate("patientDataScreenWindow", "Save Information"))
        
    def setupWidgets(self):
        self.backButton.clicked.connect(lambda:self.buttonClicked(self.backButton))
        self.saveInformationButton.clicked.connect(lambda:self.buttonClicked(self.saveInformationButton))
        self.loadImagesButton.clicked.connect(lambda:self.buttonClicked(self.loadImagesButton))
        
        self.patientIdField.clear()
        self.referredByField.clear()
        self.patientNameField.clear()
        self.ageField.clear()
        self.ageField.setText("0")
        self.mobileNumberField.clear()
        self.specialRemarksField.clear()
        
        self.currentDateField.setDate(QDate.currentDate())
        #self.patientDateOfBirthField.setDate(QDate(2000, 1, 1))
        #self.patientDateOfBirthField.dateChanged.connect(self.updateAge)
        
        # Medical history meter section
        self.maritalStatusField.addItems(["M","UM"])
        self.maritalStatusField.setCurrentIndex(0)
        self.maritalStatusField.currentIndexChanged.connect(self.updateMedicalHistoryMeter)
        
        self.breastFeedingHistoryField.addItems(["BF", "NF"])
        self.breastFeedingHistoryField.setCurrentIndex(0)
        self.breastFeedingHistoryField.currentIndexChanged.connect(self.updateMedicalHistoryMeter)
        
        self.ageDuringFirstPregnancyField.addItems(["BL", "AB"])
        self.ageDuringFirstPregnancyField.setCurrentIndex(0)
        self.ageDuringFirstPregnancyField.currentIndexChanged.connect(self.updateMedicalHistoryMeter)
        
        self.bcFamilyHistoryField.addItems(["N", "CL", "SS", "DD", "MM"])
        self.bcFamilyHistoryField.setCurrentIndex(0)
        self.bcFamilyHistoryField.currentIndexChanged.connect(self.updateMedicalHistoryMeter)
        
        self.selfHistoryOfBCField.addItems(["NO", "YS"])
        self.selfHistoryOfBCField.setCurrentIndex(0)
        self.selfHistoryOfBCField.currentIndexChanged.connect(self.updateMedicalHistoryMeter)
        
        self.breastProfileField.addItems(["R", "LS", "SS", "OB"])
        self.breastProfileField.setCurrentIndex(0)
        self.breastProfileField.currentIndexChanged.connect(self.updateMedicalHistoryMeter)
        
        self.radiationHistoryField.addItems(["S", "US"])
        self.radiationHistoryField.setCurrentIndex(0)
        self.radiationHistoryField.currentIndexChanged.connect(self.updateMedicalHistoryMeter)
        
        self.medicineConsumptionHistoryField.addItems(["Y", "N"])
        self.medicineConsumptionHistoryField.setCurrentIndex(0)
        self.medicineConsumptionHistoryField.currentIndexChanged.connect(self.updateMedicalHistoryMeter)
        
        # diagnostic meter section
        self.diagnosticAsymmetryField.addItems(["5", "10", "15"])
        #self.diagnosticAsymmetryField.setCurrentIndex(0)
        #self.diagnosticAsymmetryField.currentIndexChanged.connect(self.updateDiagnosticMeter)
        
        self.diagnosticCurvePatternField.addItems(["5", "10", "15"])
        #self.diagnosticCurvePatternField.setCurrentIndex(0)
        #self.diagnosticCurvePatternField.currentIndexChanged.connect(self.updateDiagnosticMeter)
        
        self.diagnosticHyperthermiaField.addItems(["0", "20"])
        #self.diagnosticHyperthermiaField.setCurrentIndex(0)
        #self.diagnosticHyperthermiaField.currentIndexChanged.connect(self.updateDiagnosticMeter)
        
        self.diagnostic1CField.addItems(["20", "40"])
        #self.diagnostic1CField.setCurrentIndex(0)
        #self.diagnostic1CField.currentIndexChanged.connect(self.updateDiagnosticMeter)
        
        self.diagnosticFurrowField.addItems(["0", "1"])
        #self.diagnosticFurrowField.setCurrentIndex(0)
        #self.diagnosticFurrowField.currentIndexChanged.connect(self.updateDiagnosticMeter)
        
        self.diagnosticPinpointField.addItems(["0", "1"])
        #self.diagnosticPinpointField.setCurrentIndex(0)
        #self.diagnosticPinpointField.currentIndexChanged.connect(self.updateDiagnosticMeter)
        
        self.diagnosticBreastProfileField.addItems(["0", "1", "2", "3"])
        #self.diagnosticBreastProfileField.setCurrentIndex(0)
        #self.diagnosticBreastProfileField.currentIndexChanged.connect(self.updateDiagnosticMeter)
        
        self.diagnosticAgeField.addItems(["1", "2", "3"])
        #self.diagnosticAgeField.setCurrentIndex(0)
        #self.diagnosticAgeField.currentIndexChanged.connect(self.updateDiagnosticMeter)
        
        self.diagnosticFUniqueField.addItems(["5", "10", "20", "40"])
        #self.diagnosticFUniqueField.setCurrentIndex(0)
        #self.diagnosticFUniqueField.currentIndexChanged.connect(self.updateDiagnosticMeter)

    def blockAll(self):
        self.backButton.setEnabled(False)
        self.saveInformationButton.setEnabled(False)
        self.loadImagesButton.setEnabled(False)

    def unblockAll(self):
        self.backButton.setEnabled(True)
        self.saveInformationButton.setEnabled(True)
        self.loadImagesButton.setEnabled(True)
        
    def setAge(self):
        birthDate = self.patientDateOfBirthField.date()
        birthDate = birthDate.toPyDate()
        age = str(relativedelta(date.today(), birthDate).years)
        self.ageField.clear()
        self.ageField.setText(age)
        if int(age) <= 50:
            self.diagnosticAgeField.setCurrentIndex(0)
        elif int(age) > 50 and int(age) < 72:
            self.diagnosticAgeField.setCurrentIndex(1)
        else:
            self.diagnosticAgeField.setCurrentIndex(2)
        
    def buttonClicked(self, button):
        if button == self.backButton:
            self.window.close()
            window = self.window
            del self.window
            del self.cache
            HomeScreen.HomeScreen(window)
            #window.show()
            window.showMaximized()
            #from Transition import Transition
            #Transition(HomeScreen.HomeScreen, self, window)
        elif button == self.saveInformationButton:
            self.blockAll()
            self.readInformationFromGuiAndSaveToDatabase()
            self.unblockAll()
        elif button == self.loadImagesButton:
            # saving patient data before leaving screen
            self.blockAll()
            self.readInformationFromGuiAndSaveToDatabase()
            self.unblockAll()
            self.window.close()
            window = self.window
            cache = self.cache
            del self.window
            del self.cache
            ImageSelectionScreen.ImageSelectionScreen(window, cache)
            window.showMaximized()

    def preprocessScreen(self):
        self.blockAll()
        if self.cache.isNew is False:
            getFromDatabase = False
            for field in self.cache.diagnosticFields:
                if field is None:
                    getFromDatabase = True
                    break
            if getFromDatabase == True:
                con = Database()
                if con.openConnection() is True:
                    ret = con.getDiagnosticMeterFieldsFromLastVisit(self.cache.id)
                    con.closeConnection()
                    if ret is not None:
                        self.cache.diagnosticFields = ret
        self.updateDiagnosticFieldsToLastVisit()
        widgets = [self.diagnosticAsymmetryField, self.diagnosticCurvePatternField, self.diagnosticHyperthermiaField, self.diagnostic1CField, self.diagnosticFurrowField, self.diagnosticPinpointField, self.diagnosticBreastProfileField, self.diagnosticAgeField, self.diagnosticFUniqueField]
        for widget in widgets:
            widget.currentIndexChanged.connect(self.updateDiagnosticMeter)
        self.patientDateOfBirthField.dateChanged.connect(self.updateAge)
        self.setAge()
        self.updateAge()
        self.updateMedicalHistoryMeter()
        self.updateDiagnosticMeter()
        self.unblockAll()
        
    def updateAge(self):
        birthDate = self.patientDateOfBirthField.date()
        birthDate = birthDate.toPyDate()
        age = str(relativedelta(date.today(), birthDate).years)
        self.ageField.clear()
        self.ageField.setText(age)
        if int(age) <= 50:
            self.diagnosticAgeField.setCurrentIndex(0)
        elif int(age) > 50 and int(age) < 72:
            self.diagnosticAgeField.setCurrentIndex(1)
        else:
            self.diagnosticAgeField.setCurrentIndex(2)
        self.updateMedicalHistoryMeter()
        self.updateDiagnosticMeter()
        
    def updateMedicalHistoryMeter(self):
        total = 23
        sum = 0
        
        age = str(self.ageField.text())
        age = int(age)
        if age <= 50:
            sum += 1
        elif age > 50 and age <= 70:
            sum += 2
        elif age > 70:
            sum += 3
        
        if self.maritalStatusField.currentText() == "UM":
            sum += 1
        
        if self.breastFeedingHistoryField.currentText() == "NF":
            sum += 1
        
        if self.ageDuringFirstPregnancyField.currentText() == "AB":
            sum += 1
        
        if self.bcFamilyHistoryField.currentText() == "CL":
            sum += 1
        elif self.bcFamilyHistoryField.currentText() == "SS" or self.bcFamilyHistoryField.currentText() == "DD" or self.bcFamilyHistoryField.currentText() == "MM":
            sum += 2
        
        if self.selfHistoryOfBCField.currentText() == "YS":
            sum += 10
        
        if self.breastProfileField.currentText() == "LS":
            sum += 1
        elif self.breastProfileField.currentText() == "SS":
            sum += 2
        elif self.breastProfileField.currentText() == "OB":
            sum += 3
        
        if self.radiationHistoryField.currentText() == "US":
            sum += 1
        
        if self.medicineConsumptionHistoryField.currentText() == "Y":
            sum += 1
        
        #print(sum)
        self.cache.historyMeterScore = sum
        
        if sum <= 9:
            pic = cv.imread("green.png")
            pic = imageConversion(pic, width=200, height=200)
            showOnWidget(self.medicalHistoryMeterLabel, pic)
        elif sum > 9 and sum <= 14:
            pic = cv.imread("yellow.jpg")
            pic = imageConversion(pic, width=200, height=200)
            showOnWidget(self.medicalHistoryMeterLabel, pic)
        else:
            pic = cv.imread("red.png")
            pic = imageConversion(pic, width=200, height=200)
            showOnWidget(self.medicalHistoryMeterLabel, pic)
        
    def updateDiagnosticMeter(self):
        total = 138
        sum = 0
        widgets = [self.diagnosticAsymmetryField, self.diagnosticCurvePatternField, self.diagnosticHyperthermiaField, self.diagnostic1CField, self.diagnosticFurrowField, self.diagnosticPinpointField, self.diagnosticBreastProfileField, self.diagnosticAgeField, self.diagnosticFUniqueField]
        num = 0
        for widget in widgets:
            sum += int(widget.currentText())
            self.cache.diagnosticFields[num] = widget.currentIndex()
            num += 1
        #print(sum)
        percent = round(sum/total*100)
        green = QColor(0, 255, 0)
        yellow = QColor(255, 255, 0)
        red = QColor(255, 0, 0)
        color = green
        if percent < 75 and percent > 50:
            color = yellow
        elif percent >= 75:
            color = red
        palette = self.diagnosticMeterReadingField.palette()
        palette.setColor(palette.WindowText, color)
        self.diagnosticMeterReadingField.setProperty("intValue", percent)
        self.diagnosticMeterReadingField.setPalette(palette)
        self.cache.diagnosticScore = percent

    def updateDiagnosticFieldsToLastVisit(self):
        widgets = [self.diagnosticAsymmetryField, self.diagnosticCurvePatternField, self.diagnosticHyperthermiaField, self.diagnostic1CField, self.diagnosticFurrowField, self.diagnosticPinpointField, self.diagnosticBreastProfileField, self.diagnosticAgeField, self.diagnosticFUniqueField]
        num = 0
        #.setCurrentIndex(0)
        #.currentIndexChanged.connect(self.updateDiagnosticMeter)
        for widget in widgets:
            if self.cache.diagnosticFields[num] is None:
                widget.setCurrentIndex(0)
                self.cache.diagnosticFields[num] = 0
            else:
                widget.setCurrentIndex(self.cache.diagnosticFields[num])
            num += 1
        
    def readInformationFromDatabaseAndUpload(self):
        con = Database()
        _ = con.openConnection()
        if _ is not False:
            data = con.getPatientInformationFromDB(self.cache.id)
            con.closeConnection()
            if data is not None:
                self.patientIdField.clear()
                self.patientIdField.setText(data["PatientId"])
                self.referredByField.clear()
                self.referredByField.setText(data["ReferedBy"])
                self.patientNameField.clear()
                self.patientNameField.setText(data["Name"])
                dob = data["DOB"]
                dob = datetime.strptime(dob, "%Y-%m-%d").date()
                self.patientDateOfBirthField.setDate(QDate(dob.year, dob.month, dob.day))
                #self.updateAge()
                self.mobileNumberField.clear()
                self.mobileNumberField.setText(data["MobileNo"])
                self.maritalStatusField.setCurrentIndex(data["MaritalStatus"])
                self.breastFeedingHistoryField.setCurrentIndex(data["BreastFeed"])
                self.ageDuringFirstPregnancyField.setCurrentIndex(data["AgeAtFirstPregnancy"])
                self.bcFamilyHistoryField.setCurrentIndex(data["BCFamilyHistory"])
                self.selfHistoryOfBCField.setCurrentIndex(data["BCSelfHistory"])
                self.breastProfileField.setCurrentIndex(data["BreastProfile"])
                self.radiationHistoryField.setCurrentIndex(data["RadiationHistory"])
                self.medicineConsumptionHistoryField.setCurrentIndex(data["MedConsumptionHistory"])
                self.specialRemarksField.clear()
                self.specialRemarksField.setText(data["SpecialRemarks"])
                #self.updateMedicalHistoryMeter() ##
                #self.updateDiagnosticMeter() ##
                '''
                successMsgBox = QMessageBox()
                successMsgBox.setIcon(QMessageBox.Information)
                successMsgBox.setWindowTitle("Load Successful")
                successMsgBox.setText("Patient information load successful")
                additionalText = "Patient id. - " + data["PatientId"] + " data loaded successfully."
                successMsgBox.setInformativeText(additionalText)
                detailedText = dumps(data)
                successMsgBox.setDetailedText(detailedText)
                successMsgBox.setStandardButtons(QMessageBox.Ok)
                successMsgBox.exec_()
                '''
        else:
            failureMsgBox = QMessageBox()
            failureMsgBox.setIcon(QMessageBox.Critical)
            failureMsgBox.setWindowTitle("Database Error")
            failureMsgBox.setText("Connection to database failed")
            additionalText = "Connection to database failed as no running instance of database server found."
            failureMsgBox.setInformativeText(additionalText)
            detailedText = "Application tried to connect to MongoDB Server but failed as no running instance of server was found.\nWhat can be done:\n\t1. Close the application.\n\t2. Look for MongoDB server service \n\t   and start it or manually go to \n\t   MongoDB program files and run \n\t   'mongod.exe' to start service \n\t   with appropriate arguments."
            failureMsgBox.setDetailedText(detailedText)
            failureMsgBox.setStandardButtons(QMessageBox.Ok)
            failureMsgBox.exec_()
        
    def readInformationFromGuiAndSaveToDatabase(self):
        con = Database()
        _ = con.openConnection()
        if _ is not False:
            dob = self.patientDateOfBirthField.date()
            dob = str(dob.toPyDate())
            data = {
                "PatientId" : self.patientIdField.text(),
                "ReferedBy" : self.referredByField.text(),
                "Name" : self.patientNameField.text(),
                "DOB" : dob,
                "MobileNo" : self.mobileNumberField.text(),
                "MaritalStatus" : self.maritalStatusField.currentIndex(),
                "BreastFeed" : self.breastFeedingHistoryField.currentIndex(),
                "AgeAtFirstPregnancy" : self.ageDuringFirstPregnancyField.currentIndex(),
                "BCFamilyHistory" : self.bcFamilyHistoryField.currentIndex(),
                "BCSelfHistory" : self.selfHistoryOfBCField.currentIndex(),
                "BreastProfile" : self.breastProfileField.currentIndex(),
                "RadiationHistory" : self.radiationHistoryField.currentIndex(),
                "MedConsumptionHistory" : self.medicineConsumptionHistoryField.currentIndex(),
                "SpecialRemarks" : self.specialRemarksField.toPlainText(),
                "HistoryMeterScore" : self.cache.historyMeterScore
            }
            con.savePatientInformationInDB(data, self.cache.isNew)
            con.closeConnection()
            if self.cache.isNew is True:
                self.cache.isNew = False
            self.cachePatientInfo(data)
            successMsgBox = QMessageBox()
            successMsgBox.setIcon(QMessageBox.Information)
            successMsgBox.setWindowTitle("Save Successful")
            successMsgBox.setText("Patient information save successful")
            additionalText = "Patient id. - " + data["PatientId"] + " data saved successfully."
            successMsgBox.setInformativeText(additionalText)
            detailedText = dumps(data)
            successMsgBox.setDetailedText(detailedText)
            successMsgBox.setStandardButtons(QMessageBox.Ok)
            successMsgBox.exec_()
        else:
            failureMsgBox = QMessageBox()
            failureMsgBox.setIcon(QMessageBox.Critical)
            failureMsgBox.setWindowTitle("Database Error")
            failureMsgBox.setText("Connection to database failed")
            additionalText = "Connection to database failed as no running instance of database server found."
            failureMsgBox.setInformativeText(additionalText)
            detailedText = "Application tried to connect to MongoDB Server but failed as no running instance of server was found.\nWhat can be done:\n\t1. Close the application.\n\t2. Look for MongoDB server service \n\t   and start it or manually go to \n\t   MongoDB program files and run \n\t   'mongod.exe' to start service \n\t   with appropriate arguments."
            failureMsgBox.setDetailedText(detailedText)
            failureMsgBox.setStandardButtons(QMessageBox.Ok)
            failureMsgBox.exec_()

    def cachePatientInfo(self, data):
        self.cache.name = data["Name"]
        self.cache.ref = data["ReferedBy"]
        self.cache.age = self.ageField.text()
        self.cache.specialRemarks = data["SpecialRemarks"]
